<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="./style.css">
    </head>
    <body>
      <form target="_self" method="post">
        <label>Contact: <input autoComplete="false" type="text" name="contact" /> </label>
        <label>Verification Code: <input autoComplete="off" type="text" name="verificationCode" /> </label>
        <input type="submit" name="Send" value="Send" formmethod="get" formaction="/sendVerification" formtarget="response" onclick="disableSend()" />
        
        <label>New Password: <input autoComplete="off" type="password" name="password" /> </label>
        <input type="submit" value="Reset Password" />
        <input type="text" name="action" value="register" disabled="true" style="display:none">
      </form>
      <iframe name="response"></iframe>
      <script>
        function disableSend() {
          var waitTime = 60
          submit = document.querySelector('input[value="Send"]')

          submit.style.color = 'lightgrey'

          function countdown () {
            waitTime -= 1
            if (waitTime === 59) submit.disabled = true
            submit.value = waitTime
            console.log('countdown', waitTime);
            if (waitTime <= 0) {
              window.clearInterval(interval)
              submit.disabled = false
              submit.style.color = 'rgb(80,80,80)'
              submit.value = 'Send'
            }
          }

          var interval = window.setInterval(countdown, 1000)
        }
      </script>
    </body>
</html>
